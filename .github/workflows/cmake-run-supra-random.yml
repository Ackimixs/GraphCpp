name: Deployment

on:
  workflow_run:
    workflows: ["CMake on a single platform"]
    types:
      - completed

jobs:
  deploy:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Configure CMake
        working-directory: ${{github.workspace}}

        run: cmake -S . -B build

      - name: Build
        working-directory: ${{github.workspace}}

        run: cmake --build build --config ${{env.BUILD_TYPE}}

      - name: Test
        working-directory: ${{github.workspace}}/build

        run: ./ggraph --run-supra-random-graph